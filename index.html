<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.6"/>
<title>libtransistor: Main Page</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">libtransistor
   </div>
   <div id="projectbrief">A userland library for the Nintendo Switch</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.6 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li class="current"><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
</div><!-- top -->
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Data Structures</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Macros</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">libtransistor Documentation</div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p><a href="https://travis-ci.org/reswitched/libtransistor">![Build Status](https://travis-ci.org/reswitched/libtransistor.svg?branch=development)</a> <a href="https://discordapp.com/invite/ZdqEhed">![Chat on Discord](https://img.shields.io/badge/chat-Discord-brightgreen.svg)</a></p>
<p>Libtransistor is a userland library for the Nintendo Switch. Binaries should run under Mephisto, Yuzu, Ryujinx, or on hardware with any firmware version via <a href="https://github.com/Atmosphere-NX/Atmosphere">Atmosph√®re</a>.</p>
<h2>Documentation</h2>
<p>The documentation is automatically built and can be found here: <a href="https://reswitched.github.io/libtransistor">https://reswitched.github.io/libtransistor</a></p>
<h2>Installation</h2>
<p>For a more in-depth explanation, see <a href="https://reswitchedweekly.github.io/Development-Setup">The Guide</a>.</p>
<p>Download our <a href="https://github.com/reswitched/libtransistor/releases/latest">latest release</a>. Choose either <code>libtransistor_vX.X.X.tar.gz</code> or <code>libtransistor_vX.X.X.zip</code>, and extract it. The recommended place to extract these archives is into <code>/opt/libtransistor/</code>. Next, set the <code>LIBTRANSISTOR_HOME</code> environment variable to wherever you extracted the archive.</p>
<p>The <code>tests_{nro,nso}.{tar.gz,zip}</code> archives contain builds of all of the tests included with libtransistor.</p>
<h2>Usage</h2>
<p>If you're using a Makefile-based build system, include <code>/libtransistor.mk</code>. You will also need to provide custom linking rules. See <a href="https://github.com/reswitched/libtransistor/blob/development/projects/example/Makefile">`projects/example/`</a> for an example of how to do this.</p>
<p>Otherwise, specify <code>CC_FLAGS</code> and <code>LD_FLAGS</code> and such based off of <a href="https://github.com/reswitched/libtransistor-base/blob/master/libtransistor.mk">`libtransistor.mk`</a>.</p>
<h2>Building</h2>
<p>For a more in-depth explanation, see <a href="https://reswitchedweekly.github.io/Development-Setup">The Guide</a>.</p>
<p>First, clone the repo with</p>
<p>``` git clone &ndash;recursive <a href="https://github.com/reswitched/libtransistor">https://github.com/reswitched/libtransistor</a> ```</p>
<p>Next, get a copy of <a href="https://github.com/reswitched/libtransistor-base.git">libtransistor-base</a>. You can either <a href="https://github.com/reswitched/libtransistor-base#building">build it yourself</a>, or download a <a href="https://github.com/reswitched/libtransistor-base/releases">pre-built release</a>. Pick a release with a version number equal to the version of libtransistor that you are building, or the next lowest if no such version exists. If you build it yourself, copy the <code>dist/</code> folder from libtransistor-base to the root of this repository's contents, so it's in the same place as this <code>README.md</code> and <code>lib</code> and <code>include</code>. If you download a release, extract it into a new folder called <code>dist</code>.</p>
<p>You will need Python 3 and the python packages listed in <a href="https://github.com/reswitched/libtransistor-base/blob/master/requirements.txt">`dist/requirements.txt`</a>. You'll also need clang and lld &gt;=5.0 (llvm linker).</p>
<p>You <em>should</em> just be able to run <code>make</code>. If that doesn't work, submit an issue (or pull request). This will produce a number of <code>nro</code> and <code>nso</code> files in <code>build/test/</code>. These are binaries for the Nintendo Switch. NRO files are relocatable shared objects suitable for use with <a href="https://reswitched.tech/rohan">ROhan</a>, <a href="https://switchbrew.github.io/nx-hbl/">the Homebrew Launcher</a>, or any other loader taking NROs. Both NRO and NSO binaries can be run under Mephisto.</p>
<h3>Building on Fedora</h3>
<p>Fedora does not ship recent enough clang and lld binaries. However, pre-built clang binaries from <a href="https://releases.llvm.org">llvm.org</a> can be used.</p>
<p>Example:</p>
<p>```bash wget -c <a href="http://releases.llvm.org/5.0.1/clang+llvm-5.0.1-x86_64-linux-gnu-Fedora27.tar.xz">http://releases.llvm.org/5.0.1/clang+llvm-5.0.1-x86_64-linux-gnu-Fedora27.tar.xz</a> tar xpf clang+llvm-5.0.1-x86_64-linux-gnu-Fedora27.tar.xz export PATH=<code>pwd</code>/clang+llvm-5.0.1-x86_64-linux-gnu-Fedora27/bin:$PATH cd libtransistor make ```</p>
<p>If some of the cmake CXX tests fail, you may need to install the necessary dependencies.</p>
<p>```bash sudo dnf -y install libstdc++-devel gcc-c++.x86_64 ```</p>
<h3>Building on Arch Linux</h3>
<p>You'll need to install some packages. ```bash sudo pacman -S llvm clang lld python python-pip squashfs-tools base-devel git cmake ```</p>
<p>and you'll also need to install some python dependencies via pip. ```bash pip install &ndash;user -r requirements.txt ```</p>
<h3>Building on OSX</h3>
<p>You will need to install <code>squashfs</code>: ```bash brew install squashfs ```</p>
<h2>Running</h2>
<p>``` $ ./ctu &ndash;load-nro &lt;path-to-libtransistor&gt;/build/test/&lt;binary&gt;.nro ``<code> For running the</code>bsd<code>test, you may want to also pass</code>&ndash;enable-sockets`. Don't pass that for anything you don't want phoning home, though.</p>
<h2>Debugging</h2>
<p>Because Mephisto comes with a GDB stub and we produce standard ELF files before converting to NSO/NRO, we can debug libtransistor binaries very easily.</p>
<p>``` $ ./ctu &ndash;load-nro &lt;path-to-libtransistor&gt;/build/test/&lt;binary&gt;.nro &ndash;enable-gdb [GdbStub] INFO: Starting GDB server on port 24689... [GdbStub] INFO: Waiting for gdb to connect... <code> </code> $ aarch64-none-elf-gdb (gdb) target remote localhost:24689 Remote debugging using localhost:24689 warning: No executable has been specified and target does not support determining executable automatically. Try using the "file" command. 0x0000007100000080 in ?? () (gdb) add-symbol-file &lt;path-to-libtransistor&gt;/build/test/&lt;binary&gt;.nro.so 0x7100000000 -s .bss 0x7100000000 add symbol table from file "&lt;path-to-libtransistor&gt;/build/test/&lt;binary&gt;.nro.so" at .text_addr = 0x7100000000 .bss_addr = 0x7100000000 (y or n) y Reading symbols from &lt;path-to-libtransistor&gt;/build/test/&lt;binary&gt;.nro.so...done. (gdb) ``` </p>
</div></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Mon Jan 28 2019 08:34:59 for libtransistor by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.6
</small></address>
</body>
</html>
